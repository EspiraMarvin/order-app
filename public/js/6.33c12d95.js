(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"781e":function(t,e,r){"use strict";r("8e6e"),r("8a81"),r("456d"),r("ac6a"),r("cadf"),r("06db"),r("ffc1"),r("a481");var i=r("c47a"),o=r.n(i),n=r("2f62");function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){o()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var c={created:function(){},data:function(){return{}},computed:s({},Object(n["c"])({notification:"GET_NOTIFICATION",errors:"GET_ERRORS"})),methods:{orderNotify:function(t,e,r){this.$q.notify({color:t,message:e,position:r})},formatString:function(t){return t.replace(/_/g," ")},OrderNotifyType:function(t,e,r){this.$q.notify({type:t,message:e,position:r})},goHome:function(){this.$router.push("/home")}},mounted:function(){},watch:{notification:{deep:!0,handler:function(){0!==Object.entries(this.notification).length&&this.notification.constructor===Object&&(this.$q.notify(this.notification),this.$store.commit("SET_NOTIFICATION",{}))}},errors:{deep:!0,handler:function(){var t=this;0!==this.errors.length&&(this.errors.forEach((function(e){t.OrderNotifyType("negative",e,"top")})),this.$store.commit("SET_ERRORS",[]))}}}};e["a"]=c},c16e:function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("q-page",[r("q-card",{staticClass:"q-pa-md q-ma-md",attrs:{elevated:""}},[r("q-table",{attrs:{title:"Orders List",data:t.ordersResult.data,columns:t.tableHeaders,"row-key":"id",loading:t.loadingOrders,filter:t.pagination.filter,pagination:t.pagination,"hide-bottom":""},on:{"update:pagination":function(e){t.pagination=e},request:t.onRequest},scopedSlots:t._u([{key:"header",fn:function(e){return[r("q-tr",{attrs:{props:e}},t._l(e.cols,(function(i){return r("q-th",{key:i.name,staticClass:"text-capitalize text-black",attrs:{props:e}},[t._v("\n            "+t._s(i.label)+"\n          ")])})),1)]}},{key:"loading",fn:function(){return[r("q-inner-loading",{attrs:{showing:"",color:"primary"}})]},proxy:!0},{key:"top-right",fn:function(){return[t._e(),r("q-btn",{staticClass:"q-mr-sm text-black q-pl-md q-pr-md",attrs:{label:"Add Order",color:"gray"},on:{click:t.buttonCreate}})]},proxy:!0},{key:"body",fn:function(e){return[r("q-tr",{attrs:{props:e}},[t._l(e.cols,(function(i){return["actions"!==i.name?r("q-td",{key:i.name,staticClass:"text-center"},[t._v("\n              "+t._s(e.row[i.name])+"\n            ")]):t._e(),"actions"===i.name?r("q-td",{key:i.name,attrs:{align:"center"}},[r("q-btn",{staticClass:"q-ma-xs",attrs:{outline:"",color:"secondary",icon:"visibility"},on:{click:function(r){return t.buttonView(e.row)}}}),r("q-btn",{staticClass:"q-ma-xs",attrs:{outline:"",color:"positive",icon:"edit"},on:{click:function(r){return t.buttonEdit(e.row)}}}),r("q-btn",{staticClass:"q-ma-xs",attrs:{outline:"",color:"negative",icon:"delete"},on:{click:function(r){return t.buttonDelete(e.row)}}})],1):t._e()]}))],2)]}}])}),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-8 q-pa-md float-right"},[r("q-pagination",{staticClass:"float-right",attrs:{max:t.pagination.last_page,"direction-links":"","boundary-links":"","max-pages":1,ellipses:!0},on:{input:t.onPageChange},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1),r("div",{staticClass:"col-md-4 q-pa-md"},[r("span",{staticClass:"q-pt-xl-lg"},[t._v("Total Records: "+t._s(t.pagination.rowsNumber)+" ")])])])],1),r("q-dialog",{attrs:{"transition-show":"rotate","transition-hide":"rotate",persistent:""},model:{value:t.confirm,callback:function(e){t.confirm=e},expression:"confirm"}},[r("q-card",[r("q-card-section",{staticClass:"row items-center"},[r("q-avatar",{attrs:{icon:"warning",color:"white","text-color":"red"}}),r("span",{staticClass:"q-ml-sm"},[t._v("This Action Deletes Order. Proceed? ")])],1),r("q-card-actions",{attrs:{align:"right"}},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"primary"}}),r("q-btn",{attrs:{flat:"",label:"Delete",color:"red"},on:{click:t.proceedDelete}})],1)],1)],1),r("q-dialog",{model:{value:t.createEditOrderDialog,callback:function(e){t.createEditOrderDialog=e},expression:"createEditOrderDialog"}},[r("q-card",{staticStyle:{width:"400px","max-width":"80vw"}},[r("q-toolbar",[r("q-toolbar-title",[t._v(t._s(t.dialogTitle))])],1),r("hr"),r("q-card-section",{staticClass:"q-pt-none"},[r("q-form",{ref:"orderForm"},[r("q-input",{attrs:{filled:"",label:"Order Number *",type:"text",disable:t.viewing,"lazy-rules":"",rules:[function(t){return t&&t.length>0||"Order Number Required"}]},model:{value:t.orderForm.order_no,callback:function(e){t.$set(t.orderForm,"order_no",e)},expression:"orderForm.order_no"}}),t.editing?t._e():r("q-select",{attrs:{label:"Product",filled:"","map-options":"",multiple:"",disable:t.viewing,options:t.productsResult.data,"option-value":"product_id","option-label":"name"},model:{value:t.products,callback:function(e){t.products=e},expression:"products"}}),r("div",{directives:[{name:"show",rawName:"v-show",value:t.viewing,expression:"viewing"}]},[r("p",{staticClass:"text-center q-mt-sm"},[t._v("Order Details")]),t.orderDetails.length?[r("p",{staticClass:"text-center"},[t._v("Total: "+t._s(t.orderDetails.length))]),t._l(t.orderDetails,(function(e){return r("q-list",{key:e.id,attrs:{bordered:""}},[r("q-item",[r("q-item-section",[t._v("Name: "+t._s(e.name)+" ")])],1),r("q-item",[r("q-item-section",[t._v("Description: "+t._s(e.description)+" ")])],1),r("q-item",[r("q-item-section",[t._v("Quantity: "+t._s(e.quantity)+" ")])],1)],1)}))]:[r("p",{staticClass:"text-center"},[t._v("No Order Details")])]],2)],1)],1),r("q-card-actions",{directives:[{name:"show",rawName:"v-show",value:!t.viewing,expression:"!viewing"}],staticClass:"bg-white",attrs:{align:"right"}},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pl-md q-pr-md q-mr-md",attrs:{label:"Close"}}),r("q-btn",{staticClass:"q-pl-md q-pr-md q-mr-md",attrs:{label:"Save",outline:"",color:"primary",loading:t.addingOrder,disable:t.addingOrder},on:{click:t.btnSave},scopedSlots:t._u([{key:"loading",fn:function(){return[r("q-spinner-facebook")]},proxy:!0}])})],1)],1)],1)],1)},o=[],n=(r("8e6e"),r("8a81"),r("ac6a"),r("cadf"),r("06db"),r("456d"),r("c47a")),a=r.n(n),s=r("2f62"),c=r("781e"),l=r("2ef0");function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){a()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var u={name:"Orders",mixins:[c["a"]],created:function(){this.$store.dispatch("FETCH_ORDERS",this.pagination)},data:function(){return{orderForm:{id:"",order_no:"",products:[]},products:[],filter:"",selected:[],orderDetails:[],confirm:!1,createEditOrderDialog:!1,deleteId:"",editing:!1,viewing:!1,dialogTitle:"",pagination:{sortBy:"",descending:!1,page:1,rowsPerPage:10,rowsNumber:10,filter:"",last_page:1}}},computed:p({},Object(s["c"])({loadingOrders:"GET_FETCHING_ORDERS",ordersResult:"GET_ORDERS",addingOrder:"GET_ADDING_ORDER",productsResult:"GET_PRODUCTS"}),{tableHeaders:function(){var t=this,e=[];if(this.ordersResult.data&&this.ordersResult.data.length){var r=this.ordersResult.data[0],i=Object.keys(r);i.map((function(r){if("relationships"!==r&&"type"!==r){var i={name:r,sortable:!0,label:t.formatString(r),field:r,headerClasses:"bg-grey-3",align:"center"};e.push(i)}})),e.push({name:"actions",sortable:!1,label:"Actions",field:"actions",headerClasses:"bg-grey-3",align:"center"})}return e}}),methods:p({},Object(s["b"])({addOrder:"ADD_ORDER",deleteOrder:"DELETE_ORDER",editOrder:"EDIT_ORDER"}),{onPageChange:function(t){this.pagination.page=t,this.$store.dispatch("FETCH_ORDERS",this.pagination)},onRequest:function(t){t.filter&&(t.pagination.filter=t.filter,this.$store.dispatch("FETCH_ORDERS",t.pagination))},buttonCreate:function(){this.editing=!1,this.viewing=!1,this.createEditOrderDialog=!0,this.dialogTitle="Create Order"},buttonEdit:function(t){var e=Object(l["cloneDeep"])(t);this.viewing=!1,this.editing=!0,this.orderForm.id=e.id,this.orderForm.order_no=e.order_no,this.orderForm.products=e.products,this.createEditOrderDialog=!0,this.dialogTitle="Edit Product"},buttonView:function(t){this.orderDetails=t.relationships.products,this.viewing=!0,this.orderForm.order_no=t.order_no,this.orderForm.products=t.relationships.products,this.createEditOrderDialog=!0,this.dialogTitle="View Order"},buttonDelete:function(t){this.confirm=!0,this.deleteId=t.id},proceedDelete:function(){this.confirm=!1,this.deleteOrder(this.deleteId)},btnSave:function(){var t=this;this.$refs.orderForm.validate().then((function(e){e?t.editing?t.editOrder(t.orderForm):(t.orderForm.products=t.products.map((function(t){return t.id})),t.addOrder(t.orderForm)):t.orderNotify("negative","Please fill all required fields *","top")}))}}),watch:{addingOrder:{handler:function(){this.addingOrder||(this.createEditOrderDialog=!1)}},ordersResult:{deep:!0,handler:function(){this.ordersResult.hasOwnProperty("meta")&&(this.pagination.page=this.ordersResult.meta.current_page,this.pagination.rowsPerPage=this.ordersResult.meta.per_page,this.pagination.rowsNumber=this.ordersResult.meta.total,this.pagination.last_page=this.ordersResult.meta.last_page)}}}},g=u,f=r("2877"),m=Object(f["a"])(g,i,o,!1,null,"8b17a81e",null);e["default"]=m.exports}}]);