(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{3740:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-page",[i("q-card",{staticClass:"q-pa-md q-ma-md",attrs:{elevated:""}},[i("q-table",{attrs:{title:"Suppliers List",data:t.suppliersResult.data,columns:t.tableHeaders,"row-key":"id",loading:t.loadingSuppliers,filter:t.pagination.filter,pagination:t.pagination,"hide-bottom":""},on:{"update:pagination":function(e){t.pagination=e},request:t.onRequest},scopedSlots:t._u([{key:"header",fn:function(e){return[i("q-tr",{attrs:{props:e}},t._l(e.cols,(function(r){return i("q-th",{key:r.name,staticClass:"text-capitalize text-black",attrs:{props:e}},[t._v("\n            "+t._s(r.label)+"\n          ")])})),1)]}},{key:"loading",fn:function(){return[i("q-inner-loading",{attrs:{showing:"",color:"primary"}})]},proxy:!0},{key:"top-right",fn:function(){return[t._e(),i("q-btn",{staticClass:"q-mr-sm text-black q-pl-md q-pr-md",attrs:{label:"Add Supplier",color:"gray"},on:{click:t.buttonCreate}})]},proxy:!0},{key:"body",fn:function(e){return[i("q-tr",{attrs:{props:e}},[t._l(e.cols,(function(r){return["actions"!==r.name?i("q-td",{key:r.name,staticClass:"text-center"},[t._v("\n              "+t._s(e.row[r.name])+"\n            ")]):t._e(),"actions"===r.name?i("q-td",{key:r.name,attrs:{align:"center"}},[i("q-btn",{staticClass:"q-ma-xs",attrs:{outline:"",color:"secondary",icon:"visibility"},on:{click:function(i){return t.buttonView(e.row)}}}),i("q-btn",{staticClass:"q-ma-xs",attrs:{outline:"",color:"positive",icon:"edit"},on:{click:function(i){return t.buttonEdit(e.row)}}}),i("q-btn",{staticClass:"q-ma-xs",attrs:{outline:"",color:"negative",icon:"delete"},on:{click:function(i){return t.buttonDelete(e.row)}}})],1):t._e()]}))],2)]}}])}),i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-8 q-pa-md float-right"},[i("q-pagination",{staticClass:"float-right",attrs:{max:t.pagination.last_page,"direction-links":"","boundary-links":"","max-pages":1,ellipses:!0},on:{input:t.onPageChange},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1),i("div",{staticClass:"col-md-4 q-pa-md"},[i("span",{staticClass:"q-pt-xl-lg"},[t._v("Total Records: "+t._s(t.pagination.rowsNumber)+" ")])])])],1),i("q-dialog",{attrs:{"transition-show":"rotate","transition-hide":"rotate",persistent:""},model:{value:t.confirm,callback:function(e){t.confirm=e},expression:"confirm"}},[i("q-card",[i("q-card-section",{staticClass:"row items-center"},[i("q-avatar",{attrs:{icon:"warning",color:"white","text-color":"red"}}),i("span",{staticClass:"q-ml-sm"},[t._v("This Action Deletes Supplier. Proceed? ")])],1),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"primary"}}),i("q-btn",{attrs:{flat:"",label:"Delete",color:"red"},on:{click:t.proceedDelete}})],1)],1)],1),i("q-dialog",{model:{value:t.createEditSupplierDialog,callback:function(e){t.createEditSupplierDialog=e},expression:"createEditSupplierDialog"}},[i("q-card",{staticStyle:{width:"400px","max-width":"80vw"}},[i("q-toolbar",[i("q-toolbar-title",[t._v(t._s(t.dialogTitle))])],1),i("hr"),i("q-card-section",{staticClass:"q-pt-none"},[i("q-form",{ref:"supplierForm"},[i("q-select",{attrs:{label:"User",filled:"","emit-value":"","map-options":"",disable:t.viewing,"transition-show":"scale","transition-hide":"scale",options:t.usersResult.data,"option-value":"name","option-label":"name"},model:{value:t.supplierForm.name,callback:function(e){t.$set(t.supplierForm,"name",e)},expression:"supplierForm.name"}}),t.editing?t._e():i("q-select",{attrs:{label:"Product",filled:"","map-options":"",multiple:"",disable:t.viewing,options:t.productsResult.data,"option-value":"product_id","option-label":"name"},model:{value:t.products,callback:function(e){t.products=e},expression:"products"}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.viewing,expression:"viewing"}]},[i("p",{staticClass:"text-center"},[t._v("Products List")]),t.supplierProducts.length?[i("p",{staticClass:"text-center"},[t._v("Total: "+t._s(t.supplierProducts.length))]),t._l(t.supplierProducts,(function(e){return i("q-list",{key:e.id,attrs:{bordered:""}},[i("q-item",[i("q-item-section",[t._v(" "+t._s(e.name)+" ")])],1)],1)}))]:[i("p",{staticClass:"text-center"},[t._v("No Products for this Supplier")])]],2)],1),i("q-card-actions",{directives:[{name:"show",rawName:"v-show",value:!t.viewing,expression:"!viewing"}],staticClass:"bg-white",attrs:{align:"right"}},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pl-md q-pr-md q-mr-md",attrs:{label:"Close"}}),i("q-btn",{staticClass:"q-pl-md q-pr-md q-mr-md",attrs:{label:"Save",outline:"",color:"primary",loading:t.addingSupplier,disable:t.addingSupplier},on:{click:t.btnSave},scopedSlots:t._u([{key:"loading",fn:function(){return[i("q-spinner-facebook")]},proxy:!0}])})],1)],1)],1)],1)},a=[],n=(i("8e6e"),i("8a81"),i("7f7f"),i("ac6a"),i("cadf"),i("06db"),i("456d"),i("c47a")),s=i.n(n),o=i("2f62"),l=i("781e"),p=i("2ef0");function c(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function u(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?c(Object(i),!0).forEach((function(e){s()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var d={name:"Suppliers",mixins:[l["a"]],created:function(){this.$store.dispatch("FETCH_SUPPLIERS",this.pagination)},data:function(){return{supplierForm:{id:"",name:"",products:[]},products:[],filter:"",selected:[],supplierProducts:[],confirm:!1,createEditSupplierDialog:!1,deleteId:"",editing:!1,viewing:!1,dialogTitle:"",pagination:{sortBy:"",descending:!1,page:1,rowsPerPage:10,rowsNumber:10,filter:"",last_page:1}}},computed:u({},Object(o["c"])({loadingSuppliers:"GET_FETCHING_SUPPLIERS",suppliersResult:"GET_SUPPLIERS",addingSupplier:"GET_ADDING_SUPPLIER",productsResult:"GET_PRODUCTS",usersResult:"GET_USERS"}),{tableHeaders:function(){var t=this,e=[];if(this.suppliersResult.data&&this.suppliersResult.data.length){var i=this.suppliersResult.data[0],r=Object.keys(i);r.map((function(i){if("relationships"!==i&&"type"!==i){var r={name:i,sortable:!0,label:t.formatString(i),field:i,headerClasses:"bg-grey-3",align:"center"};e.push(r)}})),e.push({name:"actions",sortable:!1,label:"Actions",field:"actions",headerClasses:"bg-grey-3",align:"center"})}return e}}),methods:u({},Object(o["b"])({addSupplier:"ADD_SUPPLIER",deleteSupplier:"DELETE_SUPPLIER",editSupplier:"EDIT_SUPPLIER"}),{onPageChange:function(t){this.pagination.page=t,this.$store.dispatch("FETCH_SUPPLIERS",this.pagination)},onRequest:function(t){t.filter&&(t.pagination.filter=t.filter,this.$store.dispatch("FETCH_SUPPLIERS",t.pagination))},buttonCreate:function(){this.editing=!1,this.viewing=!1,this.createEditSupplierDialog=!0,this.dialogTitle="Create Supplier"},buttonEdit:function(t){var e=Object(p["cloneDeep"])(t);this.viewing=!1,this.editing=!0,this.supplierForm.id=e.id,this.supplierForm.name=e.name,this.createEditSupplierDialog=!0,this.dialogTitle="Edit Supplier"},buttonView:function(t){this.supplierProducts=t.relationships.products,this.viewing=!0,this.supplierForm.name=t.name,this.createEditSupplierDialog=!0,this.dialogTitle="View Supplier"},buttonDelete:function(t){this.confirm=!0,this.deleteId=t.id},proceedDelete:function(){this.confirm=!1,this.deleteSupplier(this.deleteId)},btnSave:function(){var t=this;this.$refs.supplierForm.validate().then((function(e){e?t.editing?t.editSupplier(t.supplierForm):(t.supplierForm.products=t.products.map((function(t){return t.id})),t.addSupplier(t.supplierForm)):t.orderNotify("negative","Please fill all required fields *","top")}))}}),watch:{addingSupplier:{handler:function(){this.addingSupplier||(this.createEditSupplierDialog=!1)}},suppliersResult:{deep:!0,handler:function(){this.suppliersResult.hasOwnProperty("meta")&&(this.pagination.page=this.suppliersResult.meta.current_page,this.pagination.rowsPerPage=this.suppliersResult.meta.per_page,this.pagination.rowsNumber=this.suppliersResult.meta.total,this.pagination.last_page=this.suppliersResult.meta.last_page)}}}},f=d,g=i("2877"),m=Object(g["a"])(f,r,a,!1,null,"7224bac2",null);e["default"]=m.exports},"781e":function(t,e,i){"use strict";i("8e6e"),i("8a81"),i("456d"),i("ac6a"),i("cadf"),i("06db"),i("ffc1"),i("a481");var r=i("c47a"),a=i.n(r),n=i("2f62");function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function o(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach((function(e){a()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var l={created:function(){},data:function(){return{}},computed:o({},Object(n["c"])({notification:"GET_NOTIFICATION",errors:"GET_ERRORS"})),methods:{orderNotify:function(t,e,i){this.$q.notify({color:t,message:e,position:i})},formatString:function(t){return t.replace(/_/g," ")},OrderNotifyType:function(t,e,i){this.$q.notify({type:t,message:e,position:i})},goHome:function(){this.$router.push("/home")}},mounted:function(){},watch:{notification:{deep:!0,handler:function(){0!==Object.entries(this.notification).length&&this.notification.constructor===Object&&(this.$q.notify(this.notification),this.$store.commit("SET_NOTIFICATION",{}))}},errors:{deep:!0,handler:function(){var t=this;0!==this.errors.length&&(this.errors.forEach((function(e){t.OrderNotifyType("negative",e,"top")})),this.$store.commit("SET_ERRORS",[]))}}}};e["a"]=l}}]);